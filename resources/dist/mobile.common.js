(self.webpackChunkmfModules=self.webpackChunkmfModules||[]).push([[569],{"./src/mobile.init/fakeToolbar.js":(t,e,i)=>{var n=i("./src/mobile.startup/icons.js");t.exports=function(){var t,e;return t=n.cancel().$el,e=n.spinner({tagName:"span",isIconOnly:!1,label:mw.msg("mobile-frontend-editor-loading")}).$el,$("<div>").addClass("ve-mobile-fakeToolbar-container").append($("<div>").addClass("ve-mobile-fakeToolbar-header").addClass("overlay-header").append($("<div>").addClass("ve-mobile-fakeToolbar").append(t,e)))}},"./src/mobile.startup/Anchor.js":(t,e,i)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function r(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}function a(t,e,i){return e=l(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,i||[],l(t).constructor):e.apply(t,i))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}var u=i("./src/mobile.startup/View.js"),d=i("./src/mobile.startup/util.js"),p=function(t){"use strict";function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(e,t),i=e,(n=[{key:"isTemplateMode",get:function(){return!0}},{key:"defaults",get:function(){return{progressive:void 0,destructive:void 0,additionalClassNames:"",href:void 0,label:void 0}}},{key:"template",get:function(){return d.template('\n<a {{#href}}href="{{href}}"{{/href}} class="mw-mf-anchor\n\t{{#progressive}} mw-mf-anchor-progressive{{/progressive}}\n\t{{#destructive}} mw-mf-anchor-destructive{{/destructive}}\n\t {{additionalClassNames}}">{{label}}</a>\n\t')}}])&&s(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n}(u);t.exports=p},"./src/mobile.startup/Browser.js":(t,e,i)=>{var n,s=i("./src/mobile.startup/util.js");function r(t){var e=function(){var i=this["__cache"+e.cacheId]||(this["__cache"+e.cacheId]={}),n=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(i,n)?i[n]:i[n]=t.apply(this,arguments)};return e.cacheId=Date.now().toString()+Math.random().toString(),e}function a(t,e){this.userAgent=t,this.$el=e}a.prototype={isIos:r((function(t){var e=this.userAgent,i=/ipad|iphone|ipod/i.test(e);if(!i||!t)return i;switch(t){case 8:return/OS 8_/.test(e)||/Version\/8/.test(e);case 4:return/OS 4_/.test(e);case 5:return/OS 5_/.test(e);default:return!1}})),isWideScreen:r((function(){var t=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=t})),supportsTouchEvents:r((function(){return"ontouchstart"in window}))},a.getSingleton=function(){var t;return n||(t=s.getDocument(),n=new a(window.navigator.userAgent,t)),n},t.exports=a},"./src/mobile.startup/Button.js":(t,e,i)=>{var n=i("./src/mobile.startup/mfExtend.js"),s=i("./src/mobile.startup/util.js"),r=i("./src/mobile.startup/View.js"),a=i("./src/mobile.startup/IconButton.js");function o(t){r.call(this,t)}n(o,r,{preRender:function(){var t="default";this.options.progressive?t="progressive":this.options.destructive&&(t="destructive");var e=this.options.quiet?"quiet":"normal";(this.options.progressive||this.options.destructive)&&(e="primary"),this.options.block&&(this.options.additionalClassNames+=" mf-button-block");var i=s.extend({weight:e,action:t,isIconOnly:!1,icon:null},this.options);this._button=new a(i),this.options._buttonHTML=this._button.$el.get(0).outerHTML},isTemplateMode:!0,defaults:{tagName:"a",disabled:!1,block:void 0,progressive:void 0,destructive:void 0,quiet:void 0,additionalClassNames:"",href:void 0,label:void 0,size:"medium"},template:s.template("{{{_buttonHTML}}}")}),t.exports=o},"./src/mobile.startup/CtaDrawer.js":(t,e,i)=>{var n=i("./src/mobile.startup/Drawer.js"),s=i("./src/mobile.startup/util.js"),r=i("./src/mobile.startup/Button.js"),a=i("./src/mobile.startup/Anchor.js");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=l(t.queryParams,t.returnTo);return new n(s.extend({children:[s.parseHTML("<p>").text(t.content),new r(s.extend({progressive:!0,href:mw.util.getUrl("Special:UserLogin",e),label:mw.msg("mobile-frontend-watchlist-cta-button-login")},t.progressiveButton)).$el,s.parseHTML("<div>").addClass("cta-drawer__anchors").append(new a(s.extend({href:mw.util.getUrl("Special:UserLogin",c(e,t.signupQueryParams)),progressive:!0,label:mw.msg("mobile-frontend-watchlist-cta-button-signup")},t.actionAnchor)).$el)]},t))}function l(t,e){return s.extend({returnto:e||mw.config.get("wgPageName")},t)}function c(){return[].push.call(arguments,{type:"signup"}),s.extend.apply(s,arguments)}o.prototype.test={redirectParams:l,signUpParams:c},t.exports=o},"./src/mobile.startup/Drawer.js":(t,e,i)=>{var n=i("./src/mobile.startup/mfExtend.js"),s=i("./src/mobile.startup/View.js"),r=i("./src/mobile.startup/util.js"),a=i("./src/mobile.startup/IconButton.js");function o(t){this.drawerClassName=t.className||"",this.collapseIcon=new a({icon:"expand",additionalClassNames:"cancel",label:mw.msg("mobile-frontend-drawer-arrow-label")}),s.call(this,r.extend({onBeforeHide:function(){},showCollapseIcon:!0},t,{className:"drawer-container"},{events:r.extend({"click .drawer-container__mask":function(){this.hide()}.bind(this),"click .cancel":function(t){t.preventDefault(),this.hide()}.bind(this),click:function(t){t.stopPropagation()}},t.events)}))}n(o,s,{minHideDelay:100,show:function(){var t=r.Deferred();return this.$el.find(".drawer-container__mask").addClass("drawer-container__mask--visible"),this.$el.find(".drawer").hasClass("visible")?t.resolve():setTimeout(function(){this.$el.find(".drawer").addClass("visible"),this.options.onShow&&this.options.onShow(t),setTimeout((function(){t.resolve()}),this.minHideDelay)}.bind(this),this.minHideDelay),t.promise()},hide:function(){this.$el.find(".drawer-container__mask").removeClass("drawer-container__mask--visible"),this.$el.find(".drawer").removeClass("visible"),setTimeout(function(){this.$el.find(".drawer").removeClass("visible"),this.options.onBeforeHide(this)}.bind(this),this.minHideDelay)},postRender:function(){var t=this.options,e=r.parseHTML("<div>").addClass("drawer-container__mask"),i=r.parseHTML("<div>").addClass("drawer drawer-container__drawer position-fixed ".concat(this.drawerClassName).trim());t.showCollapseIcon&&i.prepend(this.collapseIcon.$el),t.children&&i.append(t.children),this.$el.append(e),this.$el.append(i)}}),t.exports=o},"./src/mobile.startup/Icon.js":(t,e,i)=>{var n=i("./src/mobile.startup/mfExtend.js"),s=i("./src/mobile.startup/util.js"),r=i("./src/mobile.startup/View.js");function a(t){r.call(this,t)}n(a,r,{preRender:function(){this.options._iconClasses=this.getIconClasses()},getRotationClass:function(){var t="";if(this.options.rotation)switch(this.options.rotation){case-180:case 180:t="mf-mw-ui-icon-rotate-flip";break;case-90:t="mf-mw-ui-icon-rotate-anti-clockwise";break;case 90:t="mf-mw-ui-icon-rotate-clockwise";break;case 0:break;default:throw new Error("Bad value for rotation given. Must be ±90, 0 or ±180.")}return t},getIconClasses:function(){var t=this.options.base,e=this.options.icon,i=this.options.isSmall,n=this.getRotationClass(),s=this.options.additionalClassNames,r=t+" ";return e&&(r+=this.getGlyphClassName()+" "),i&&(r+="mf-icon--small "),s&&(r+=s+" "),r+n},isTemplateMode:!0,defaults:{base:"mf-icon",glyphPrefix:"mf",icon:"",rotation:0,isSmall:!1,additionalClassNames:null},getClassName:function(){return this.$el.attr("class")},getGlyphClassName:function(){return this.options.glyphPrefix?"mw-ui-icon-"+this.options.glyphPrefix+"-"+this.options.icon:"mw-ui-icon-"+this.options.icon},template:s.template('<span class="{{_iconClasses}}"> </span>')}),t.exports=a},"./src/mobile.startup/IconButton.js":(t,e,i)=>{var n=i("./src/mobile.startup/mfExtend.js"),s=i("./src/mobile.startup/util.js"),r=i("./src/mobile.startup/View.js"),a=i("./src/mobile.startup/Icon.js");function o(t){t.href&&(t.tagName="a"),"button"===t.tagName&&(t.isTypeButton=!0),r.call(this,t)}n(o,r,{preRender:function(){this.options._buttonClasses=this.getButtonClasses(),this.options._iconHTML="",this.options.icon&&(this._icon=new a({base:this.options.base,glyphPrefix:this.options.glyphPrefix,icon:this.options.icon,rotation:this.options.rotation,isSmall:this.options.isSmall}),this.options._iconHTML=this._icon.$el.get(0).outerHTML)},getButtonClasses:function(){var t=this.options.additionalClassNames,e=this.options.size,i=this.options.weight,n=this.options.action,s=this.options.isIconOnly,r="cdx-button ";return"button"!==this.options.tagName&&(r+="cdx-button--fake-button cdx-button--fake-button--enabled "),e&&(r+="cdx-button--size-".concat(e," ")),i&&(r+="cdx-button--weight-".concat(i," ")),n&&(r+="cdx-button--action-".concat(n," ")),s&&(r+="cdx-button--icon-only "),r+t},isTemplateMode:!0,defaults:{tagName:"button",href:void 0,additionalClassNames:"",title:"",size:"large",weight:"quiet",action:"",isIconOnly:!0,disabled:!1,base:"mf-icon",glyphPrefix:"mf",icon:"",rotation:0,isSmall:!1},getClassName:function(){return this.$el.attr("class")},getIcon:function(){return this._icon},template:s.template('\n\t\t<{{tagName}}\n\t\t\ttype="button"\n\t\t\t{{#isTypeButton}}{{#disabled}}disabled{{/disabled}}{{/isTypeButton}}\n\t\t\tclass="{{_buttonClasses}}"\n\t\t\t{{#id}}id="{{id}}"{{/id}}\n\t\t\t{{#href}}href="{{href}}"{{/href}}\n\t\t\t{{#title}}title="{{title}}"{{/title}}>\n\t\t\t\t{{{_iconHTML}}}\n\t\t\t\t<span>{{label}}</span>\n\t\t</{{tagName}}>\n\t')}),t.exports=o},"./src/mobile.startup/MessageBox.js":(t,e,i)=>{var n=i("./src/mobile.startup/View.js"),s=i("./src/mobile.startup/util.js");function r(){n.apply(this,arguments)}i("./src/mobile.startup/mfExtend.js")(r,n,{isTemplateMode:!0,defaults:{},template:s.template('\n<div class="{{className}} mw-message-box">\n\t{{#heading}}<h2>{{heading}}</h2>{{/heading}}\n\t{{{msg}}}\n</div>\n\t')}),t.exports=r},"./src/mobile.startup/Overlay.js":(t,e,i)=>{var n=i("./src/mobile.startup/View.js"),s=i("./src/mobile.startup/headers.js").header,r=i("./src/mobile.startup/Anchor.js"),a=i("./src/mobile.startup/util.js"),o=i("./src/mobile.startup/Browser.js").getSingleton();function l(t){this.isIos=o.isIos(),n.call(this,a.extend(!0,{headerChrome:!1,className:"overlay"},t,{events:a.extend({"click .cancel, .confirm, .initial-header .back":"onExitClick",click:function(t){t.stopPropagation()}},t.events)}))}i("./src/mobile.startup/mfExtend.js")(l,n,{template:a.template('\n{{^noHeader}}\n<div class="overlay-header-container header-container{{#headerChrome}}\n\theader-chrome{{/headerChrome}} position-fixed">\n</div>\n{{/noHeader}}\n<div class="overlay-content">\n\t{{>content}}\n</div>\n<div class="overlay-footer-container position-fixed"></div>\n\t'),hideTimeout:null,showSpinner:function(){this.$el.find(".spinner").removeClass("hidden")},hideSpinner:function(){this.$el.find(".spinner").addClass("hidden")},postRender:function(){var t=this.options.footerAnchor;this.$overlayContent=this.$el.find(".overlay-content"),this.isIos&&this.$el.addClass("overlay-ios"),t&&this.$el.find(".overlay-footer-container").append(new r(t).$el);var e=this.options.headers||[s(this.options.heading,this.options.headerActions)];this.$el.find(".overlay-header-container").append(e)},onExitClick:function(t){var e=function(){this.hide()}.bind(this);t.preventDefault(),t.stopPropagation(),this.options.onBeforeExit?this.options.onBeforeExit(e,(function(){})):e()},show:function(){var t=a.getDocument();this.scrollTop=window.pageYOffset,t.addClass("overlay-enabled"),window.scrollTo(0,1),this.$el.addClass("visible"),null!==this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)},hide:function(){return a.getDocument().removeClass("overlay-enabled"),window.scrollTo(window.pageXOffset,this.scrollTop),this.hideTimeout=setTimeout(function(){this.$el.detach(),this.hideTimeout=null}.bind(this),0),this.emit("hide"),!0},showHidden:function(t){this.$el.find(".hideable").addClass("hidden"),this.$el.find(t).removeClass("hidden")}}),l.make=function(t,e){var i=new l(t);return i.$el.find(".overlay-content").append(e.$el),i},t.exports=l},"./src/mobile.startup/OverlayManager.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s=null,r="MobileFrontend OverlayManager was here!";function a(t,e){t.on("route",this._checkRoute.bind(this)),this.router=t,this.entries={},this.stack=[],this.hideCurrent=!0,this.container=e}function o(t){t.on("hide",(function(){t.emit("_om_hide")}))}a.prototype={_onHideOverlayOutsideOverlayManager:function(){if(this.stack.length){var t=this.stack[0].route,e="string"==typeof t,i=this.router.getPath(),n=e&&i===t||i.match(t);this.hideCurrent=!1,n&&this.router.back()}},_attachOverlay:function(t){t.$el.parents().length||this.container.appendChild(t.$el[0])},_show:function(t){window.history.replaceState(r,null,window.location.href),t.once("_om_hide",this._onHideOverlayOutsideOverlayManager.bind(this)),this._attachOverlay(t),t.show()},_hideOverlay:function(t,e){var i;function n(){i=!0,t.hide()}return t.off("_om_hide"),t.options&&t.options.onBeforeExit?t.options.onBeforeExit(n,e):n(),i||t.once("_om_hide",this._onHideOverlayOutsideOverlayManager.bind(this)),i},_processMatch:function(t){var e;t&&(t.overlay?this._show(t.overlay):(e=t.factoryResult)&&(t.overlay=e,o(t.overlay),this._show(e)))},_checkRoute:function(t){var e=this.stack[0];if(e||(this.scrollTop=window.pageYOffset),!e||void 0===e.overlay||!this.hideCurrent||this._hideOverlay(e.overlay,(function(){t.preventDefault()}))){var i=Object.keys(this.entries).reduce(function(e,i){return e||this._matchRoute(t.path,this.entries[i])}.bind(this),null);i||(this.stack=[],window.scrollTo(window.pageXOffset,this.scrollTop)),this.hideCurrent=!0,this._processMatch(i)}},_matchRoute:function(t,e){var i,n,s,r,a=this.stack[1],o=this;return"string"==typeof e.route?(n=e.route===t,s=[]):s=(n=!!(r=t.match(e.route)))?r.slice(1):[],n?a&&a.path===t?(o.stack.shift(),a):(i={path:t,route:e.route,factoryResult:e.factory.apply(o,s)},this.stack[0]&&i.path===this.stack[0].path?o.stack[0]=i:o.stack.unshift(i),i):null},add:function(t,e){var i=this,s={route:t,factory:e};this.entries[t]=s,n.docReady((function(){i._processMatch(i._matchRoute(i.router.getPath(),s))}))},replaceCurrent:function(t){if(0===this.stack.length)throw new Error("Trying to replace OverlayManager's current overlay, but stack is empty");var e=this.stack[0].overlay;e&&this._hideOverlay(e),this.stack[0].overlay=t,o(t),this._show(t)}},a.getSingleton=function(){if(!s){var t=mw.loader.require("mediawiki.router"),e=document.createElement("div"),i=t.getPath(),n=window.history.state;e.className="mw-overlays-container",document.body.appendChild(e),i&&n!==r&&(window.history.replaceState(null,null,"#"),window.history.pushState(r,null,"#".concat(i))),s=new a(t,e)}return s},a.test={MANAGED_STATE:r,__clearCache:function(){s=null}},t.exports=a},"./src/mobile.startup/Page.js":(t,e,i)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function r(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}var a=mw.html,o=i("./src/mobile.startup/util.js"),l=function(){"use strict";return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=e.title||"";o.extend(this,{id:e.id||0,title:i,relevantTitle:e.relevantTitle||i,titleObj:e.titleObj,displayTitle:e.displayTitle||a.escape(i),namespaceNumber:e.namespaceNumber||0,protection:e.protection,url:e.url||mw.util.getUrl(i),wikidataDescription:e.wikidataDescription,_isMainPage:e.isMainPage||!1,isMissing:void 0!==e.isMissing?e.isMissing:0===e.id,lastModified:e.lastModified,anchor:e.anchor,revId:e.revId,_isWatched:e.isWatched,thumbnail:!!Object.prototype.hasOwnProperty.call(e,"thumbnail")&&e.thumbnail}),this.thumbnail&&this.thumbnail.width&&(this.thumbnail.isLandscape=this.thumbnail.width>this.thumbnail.height)},(e=[{key:"getDisplayTitle",value:function(){return this.displayTitle}},{key:"inNamespace",value:function(t){return this.namespaceNumber===mw.config.get("wgNamespaceIds")[t]}},{key:"isWikiText",value:function(){return"wikitext"===mw.config.get("wgPageContentModel")}},{key:"isVEAvailable",value:function(){return!!mw.config.get("wgVisualEditorConfig")&&!mw.config.get("wgVisualEditorDisabledByHook")&&this.isWikiText()}},{key:"isVEVisualAvailable",value:function(){return!!this.isVEAvailable()&&-1!==(mw.config.get("wgVisualEditorConfig").namespaces||[]).indexOf(mw.config.get("wgNamespaceNumber"))}},{key:"isVESourceAvailable",value:function(){return this.isVEAvailable()&&mw.config.get("wgMFEnableVEWikitextEditor")}},{key:"isMainPage",value:function(){return this._isMainPage}},{key:"isWatched",value:function(){return this._isWatched}},{key:"getRevisionId",value:function(){return this.revId}},{key:"getTitle",value:function(){return this.title}},{key:"getNamespaceId",value:function(){var t=this.title.split(":");return t[1]&&mw.config.get("wgNamespaceIds")[t[0].toLowerCase().replace(" ","_")]||0}}])&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();t.exports=l},"./src/mobile.startup/PageHTMLParser.js":(t,e,i)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function r(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}var a=i("./src/mobile.startup/Thumbnail.js"),o=mw.config.get("wgMFMobileFormatterHeadings",["h1","h2","h3","h4","h5"]).join(","),l=["noviewer","metadata"],c=l.map((function(t){return":not(.".concat(t,")")})).join(""),u=["a.image","a.thumbimage, a.mw-file-description"].map((function(t){return"".concat(t).concat(c)})).join(","),d=function(){"use strict";return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$el=e,this.$headings=this.$el.find(o)},(e=[{key:"findSectionHeadingByIndex",value:function(t){return t<1?$([]):this.$headings.filter('.mw-parser-output > *, [class^="mf-section-"] > *').eq(t-1)}},{key:"findChildInSectionLead",value:function(t,e){var i,n,s,r,a=o;function l(t){return t.find(e).addBack()}return 0===t?(r=this.getLeadSectionElement())&&r.length?l(r.children(e)):(i=this.findSectionHeadingByIndex(1)).length?l(i.prevAll(e)):this.$el.find(e):(i=this.findSectionHeadingByIndex(t)).hasClass("section-heading")?(n=(s=i.next()).find(a).eq(0)).length?l(n.prevAll(e)):l(s.children(e)):(n=i.eq(0).nextAll(a).eq(0),i.nextUntil(n,e))}},{key:"getLeadSectionElement",value:function(){var t=this.$el.find(".mf-section-0");return t.length?t:null}},{key:"getThumbnail",value:function(t){var e="."+l.join(",."),i=t.find(".lazy-image-placeholder"),n=0===t.parents(e).length&&0===t.find(e).length,s=t.attr("href"),r=s&&s.match(/title=([^/&]+)/),o=s&&s.match(/[^/]+$/);return i.length&&n&&(n=!new RegExp("\\b("+l.join("|")+")\\b").test(i.data("class"))),n&&(r||o)?new a({el:t,filename:mw.util.percentDecodeFragment(r?r[1]:o[0])}):null}},{key:"getThumbnails",value:function(t){var e=this,i=[];return(t=t||this.$el).find(u).each((function(){var n=t.find(this),s=e.getThumbnail(n);s&&i.push(s)})),i}},{key:"getRedLinks",value:function(){return this.$el.find(".new")}},{key:"getLanguages",value:function(t){var e=function(e){var i,n=" – ",s=e.textContent,r=e.getAttribute("title")||t;return r.indexOf(n)>-1&&(i=r.split(n)[1],r=r.split(n)[0]),i||(i=s),{lang:e.getAttribute("hreflang"),autonym:s,langname:i,title:r,url:e.getAttribute("href")}};return{languages:Array.prototype.map.call(document.querySelectorAll("#p-lang .interlanguage-link a"),e),variants:Array.prototype.map.call(document.querySelectorAll("#p-variants li a"),e)}}}])&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();d.HEADING_SELECTOR=o,d.THUMB_SELECTOR=u,t.exports=d},"./src/mobile.startup/PageList.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s=i("./src/mobile.startup/mfExtend.js"),r=i("./src/mobile.startup/View.js"),a=i("./src/mobile.startup/Browser.js").getSingleton();function o(){r.apply(this,arguments)}s(o,r,{defaults:{pages:[]},renderPageImages:function(){var t=this;setTimeout((function(){t.$el.find(".list-thumb").each((function(){var e=t.$el.find(this).data("style");t.$el.find(this).attr("style",e)}))}),a.isWideScreen()?0:1e3)},postRender:function(){this.renderPageImages()},template:n.template('\n<ul class="page-list thumbs actionable">\n\t{{#pages}}\n\t\t{{>item}}\n\t{{/pages}}\n</ul>\n\t'),templatePartials:{item:n.template('\n<li title="{{title}}" data-id="{{id}}" class="page-summary">\n  <a href="{{url}}" class="title {{#isMissing}}new{{/isMissing}}"\n    {{#anchor}}name="{{anchor}}"{{/anchor}}\n    {{#latitude}}data-latlng="{{latitude}},{{longitude}}"{{/latitude}}\n    data-title="{{title}}">\n    <div class="list-thumb\n      {{^thumbnail}}list-thumb-none list-thumb-x{{/thumbnail}}\n      {{#thumbnail.isLandscape}}list-thumb-y{{/thumbnail.isLandscape}}\n      {{^thumbnail.isLandscape}}list-thumb-x{{/thumbnail.isLandscape}}"\n      {{#thumbnail}}data-style="background-image: url( {{thumbnail.source}} )"{{/thumbnail}}></div>\n    <h3>{{{displayTitle}}}</h3>\n    {{#wikidataDescription}}\n    <div class="wikidata-description">{{wikidataDescription}}</div>\n    {{/wikidataDescription}}\n    {{#lastModified}}\n    <div class="info">{{lastModified}}</div>\n    {{/lastModified}}\n    {{#proximity}}\n    <div class="info proximity">{{proximity}}</div>\n    {{/proximity}}\n  </a>\n</li>\n\t')}}),t.exports=o},"./src/mobile.startup/Section.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s=i("./src/mobile.startup/mfExtend.js"),r=i("./src/mobile.startup/View.js");function a(t){var e=this;t.tag="h"+t.level,this.line=t.line,this.text=t.text,this.hasReferences=t.hasReferences||!1,this.id=t.id||null,this.anchor=t.anchor,this.subsections=[],(t.subsections||[]).forEach((function(t){e.subsections.push(new a(t))})),r.call(this,t)}s(a,r,{template:n.template('\n<h{{level}} id="{{anchor}}">{{{line}}}</h{{level}}>\n{{{text}}}\n\t'),defaults:{line:void 0,text:""}}),t.exports=a},"./src/mobile.startup/Skin.js":(t,e,i)=>{var n,s=i("./src/mobile.startup/Browser.js").getSingleton(),r=i("./src/mobile.startup/View.js"),a=i("./src/mobile.startup/util.js"),o=i("./src/mobile.startup/currentPage.js"),l=i("./src/mobile.startup/eventBusSingleton.js");function c(t){var e=a.extend({},t);this.page=e.page,this.name=e.name,this.eventBus=e.eventBus,e.isBorderBox=!1,r.call(this,e)}i("./src/mobile.startup/mfExtend.js")(c,r,{defaults:{page:void 0},postRender:function(){var t=this,e=this.$el;s.supportsTouchEvents()&&e.addClass("touch-events"),this.$el.find("#mw-mf-page-center").on("click",(function(e){t.emit("click",e)}))},getLicenseLinks:function(){var t=mw.message("mobile-frontend-license-links"),e=t.exists()&&t.text();return"qqx"===mw.config.get("wgUserLanguage")||e?t.parseDom():this.$el.find("#footer-info-copyright a").clone()},getLicenseMsg:function(){var t,e=this.getLicenseLinks();if(e.length){var i=mw.language.convertNumber(e.filter("a").length);if(this.$el.find("#footer-places-terms-use").length>0){var n=mw.message("mobile-frontend-editor-terms-link",this.$el.find("#footer-places-terms-use a").attr("href")).parseDom();t=mw.message("mobile-frontend-editor-licensing-with-terms",n,e,i).parse()}else t=mw.message("mobile-frontend-editor-licensing",e,i).parse()}return t}}),c.getSingleton=function(){return n||(n=new c({el:"body",page:o(),eventBus:l})),n},t.exports=c},"./src/mobile.startup/Thumbnail.js":(t,e,i)=>{var n=i("./src/mobile.startup/mfExtend.js"),s=i("./src/mobile.startup/util.js"),r=i("./src/mobile.startup/View.js");function a(t){r.call(this,s.extend({isBorderBox:!1},t))}n(a,r,{defaults:{filename:void 0},postRender:function(){this.options.description=this.$el.siblings(".thumbcaption, figcaption").text()},getDescription:function(){return this.options.description},getFileName:function(){return this.options.filename}}),t.exports=a},"./src/mobile.startup/Toggler.js":(t,e,i)=>{var n=i("./src/mobile.startup/Browser.js").getSingleton(),s=i("./src/mobile.startup/util.js"),r=s.escapeSelector,a={icon:"expand",isSmall:!0,additionalClassNames:"indicator"},o=i("./src/mobile.startup/Icon.js");function l(t){this.eventBus=t.eventBus,this.$container=t.$container,this.prefix=t.prefix,this.page=t.page,this._enable()}function c(t){var e=mw.storage.session.getObject("expandedSections")||{};return e[t.title]=e[t.title]||{},e}function u(t,e,i){var n,s,r=c(i);e.find(".section-heading span").each((function(){s=e.find(this),n=s.parents(".section-heading"),r[i.title][s.attr("id")]&&!n.hasClass("open-block")&&t.toggle(n,!0)}))}l.prototype.isCollapsedByDefault=function(){return void 0===this._isCollapsedByDefault&&(document.body.classList.contains("collapsible-headings-collapsed")?this._isCollapsedByDefault=!0:this._isCollapsedByDefault=mw.config.get("wgMFCollapseSectionsByDefault")&&!n.isWideScreen()&&"true"!==mw.storage.get("expandSections")),this._isCollapsedByDefault},l.prototype.toggle=function(t,e){if(!e&&t.hasClass("collapsible-heading-disabled"))return!1;var i=this,n=t.is(".open-block");t.toggleClass("open-block"),a.rotation=n?0:180;var s=new o(a),r=t.data("indicator");r&&(r.replaceWith(s.$el),t.data("indicator",s.$el)),t.find(".mw-headline").attr("aria-expanded",!n);var l=t.next();return l.hasClass("open-block")?(l.removeClass("open-block"),l.get(0).setAttribute("hidden","until-found")):(l.addClass("open-block"),l.removeAttr("hidden")),mw.requestIdleCallback((function(){i.eventBus.emit("section-toggled",{expanded:n,$heading:t})})),this.isCollapsedByDefault()&&function(t,e){var i=t.find(".mw-headline").attr("id"),n=c(e);i&&n[e.title]&&(t.hasClass("open-block")?n[e.title][i]=!0:delete n[e.title][i],function(t){mw.storage.session.setObject("expandedSections",t)}(n))}(t,this.page),!0},l.prototype.reveal=function(t){var e;try{e=this.$container.find("#"+r(t))}catch(t){}if(!e||!e.length)return!1;var i=e.parents(".collapsible-heading");return i.length||(i=e.parents(".collapsible-block").prev(".collapsible-heading")),i.length&&!i.hasClass("open-block")&&this.toggle(i),i.length&&window.scrollTo(0,e.offset().top),!0},l.prototype._enable=function(){var t,e,i=this;function n(){var t=window.location.hash;if(0===t.indexOf("#")&&(t=t.slice(1),!i.reveal(t))){var e=mw.util.percentDecodeFragment(t);e&&i.reveal(e)}}this.$container.children(".section-heading").each((function(t){var e=i.$container.find(this),n=e.find(".mw-headline"),s=e.find(".indicator"),r=i.prefix+"collapsible-block-"+t;if(e.next().is("section")){var l=e.next("section");e.addClass("collapsible-heading ").data("section-number",t).on("click",(function(t){var n=t.target.closest("a");n&&n.href||(t.preventDefault(),i.toggle(e))})),n.attr({tabindex:0,role:"button","aria-controls":r,"aria-expanded":"false"}),a.rotation=i.isCollapsedByDefault()?0:180;var c=new o(a);s.length?s.replaceWith(c.$el):c.prependTo(e),e.data("indicator",c.$el),l.addClass("collapsible-block").eq(0).attr({id:r}).on("beforematch",(function(){i.toggle(e)})).addClass("collapsible-block-js").get(0).setAttribute("hidden","until-found"),function(t,e){e.on("keypress",(function(i){13!==i.which&&32!==i.which||t.toggle(e)})).find("a").on("keypress mouseup",(function(t){t.stopPropagation()}))}(i,e),i.isCollapsedByDefault()||i.toggle(e)}})),(e=!!(t=mw.config.get("wgInternalRedirectTargetUrl"))&&t.split("#")[1])&&(window.location.hash=e),n(),s.getWindow().on("hashchange",(function(){n()})),this.isCollapsedByDefault()&&this.page&&u(this,this.$container,this.page)},l._getExpandedSections=c,l._expandStoredSections=u,t.exports=l},"./src/mobile.startup/View.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s=i("./src/mobile.startup/mfExtend.js"),r=/^(\S+)\s*(.*)$/,a=0;function o(){this.initialize.apply(this,arguments)}OO.mixinClass(o,OO.EventEmitter),s(o,{tagName:"div",isTemplateMode:!1,template:void 0,templatePartials:{},defaults:{},initialize:function(t){var e,i,s=this;OO.EventEmitter.call(this),t=n.extend({},this.defaults,t),this.options=t,this.cid=(e="view",i=(++a).toString(),e?e+i:i),"string"==typeof this.template&&(this.template=mw.template.compile(this.template)),t.el?this.$el=$(t.el):this.$el=this.parseHTML("<"+this.tagName+">"),this.$el.length?this._postInitialize(t):n.docReady((function(){s.$el=$(t.el),s._postInitialize(t)}))},_postInitialize:function(t){this.$el.addClass(t.className),!1!==t.isBorderBox&&this.$el.addClass("view-border-box"),this.render({})},preRender:function(){},postRender:function(){},render:function(t){var e,i;return n.extend(this.options,t),this.preRender(),this.undelegateEvents(),this.template&&!this.options.skipTemplateRender&&(i=this.template.render(this.options,this.templatePartials),this.isTemplateMode?(e=$(i),this.$el.replaceWith(e),this.$el=e):this.$el.html(i)),this.postRender(),this.delegateEvents(),this},delegateEvents:function(t){var e,i,n;if(t=t||this.options.events)for(i in this.undelegateEvents(),t)"function"!=typeof(n=t[i])&&(n=this[t[i]]),n&&(e=i.match(r),this.delegate(e[1],e[2],n.bind(this)))},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i)},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid)},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i)},parseHTML:function(t){return n.parseHTML(t,document)}}),["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach((function(t){o.prototype[t]=function(){return this.$el[t].apply(this.$el,arguments),this}})),o.make=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=new o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return t.forEach((function(t){e.append(t)})),e},t.exports=o},"./src/mobile.startup/actionParams.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s={action:"query",formatversion:2};t.exports=function(t){var e=mw.config.get("wgMFScriptPath");return n.extend({},s,{origin:e?"*":void 0},t)}},"./src/mobile.startup/amcOutreach/AmcEnableForm.js":(t,e,i)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function r(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}function a(t,e,i){return e=l(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,i||[],l(t).constructor):e.apply(t,i))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}var u=i("./src/mobile.startup/Button.js"),d=i("./src/mobile.startup/util.js"),p=function(t){"use strict";function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(e,t),i=e,(n=[{key:"isTemplateMode",get:function(){return!0}},{key:"template",get:function(){return d.template('\n<form class="amc-enable-form" action="{{postUrl}}" method="POST">\n\t{{#fields}}\n\t\t<input type="hidden" name="{{name}}" value="{{value}}">\n\t{{/fields}}\n</form>\n\t\t')}},{key:"postRender",value:function(){this.$el.append(new u({tagName:"button",progressive:!0,label:this.options.buttonLabel}).$el)}}])&&s(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n}(i("./src/mobile.startup/View.js"));t.exports=p},"./src/mobile.startup/amcOutreach/amcOutreach.js":(t,e,i)=>{var n,s=i("./src/mobile.startup/showOnPageReload.js"),r=i("./src/mobile.startup/promoCampaign/promoCampaign.js"),a=i("./src/mobile.startup/amcOutreach/amcOutreachDrawer.js"),o={onDesktopLink:"onDesktopLink",onHistoryLink:"onHistoryLink",onTalkLink:"onTalkLink"};t.exports={loadCampaign:function(){return n||(n=r((function(t,e,i,r){return a(t,n,mw.message,mw.util,s,mw.user.tokens.get("csrfToken"),e,i,r)}),o,"amc-outreach",!!mw.config.get("wgMFAmcOutreachActive"),!!mw.config.get("wgMFAmcOutreachUserEligible"),mw.storage))},ACTIONS:o}},"./src/mobile.startup/amcOutreach/amcOutreachDrawer.js":(t,e,i)=>{var n=i("./src/mobile.startup/Drawer.js"),s=i("./src/mobile.startup/Anchor.js"),r=i("./src/mobile.startup/util.js"),a=i("./src/mobile.startup/amcOutreach/AmcEnableForm.js");t.exports=function(t,e,i,o,l,c,u,d,p){return new n({className:"amc-outreach-drawer",children:[r.parseHTML("<div>").addClass("amc-outreach-image"),r.parseHTML("<p>").append(r.parseHTML("<strong>").text(i("mobile-frontend-amc-outreach-intro").text())),r.parseHTML("<p>").text(i("mobile-frontend-amc-outreach-description").text()),new a({postUrl:o.getUrl("Special:MobileOptions",{returnto:d,returntoquery:p||""}),fields:[{name:"updateSingleOption",value:"enableAMC"},{name:"enableAMC",value:"1"},{name:"token",value:c}],buttonLabel:i("mobile-frontend-amc-outreach-enable").text(),events:{submit:function(){e.makeActionIneligible(t),l.showOnPageReload(i("mobile-frontend-amc-outreach-enabled-message").text())}}}).$el,new s({href:"#",additionalClassNames:"cancel",progressive:!0,label:i("mobile-frontend-amc-outreach-no-thanks").text()}).$el],onBeforeHide:function(){e.makeActionIneligible(t),u()}})}},"./src/mobile.startup/currentPage.js":(t,e,i)=>{var n,s=i("./src/mobile.startup/Page.js");t.exports=function(){if(n)return n;var t=[].concat(mw.config.get("wgRestrictionEdit",[])),e=mw.Title.newFromText(mw.config.get("wgRelevantPageName")),i=mw.Title.newFromText(mw.config.get("wgPageName"));return 0===t.length&&t.push("*"),n=new s({title:i.getPrefixedText(),titleObj:i,relevantTitle:e.getPrefixedText(),protection:{edit:t},revId:mw.config.get("wgRevisionId"),isMainPage:mw.config.get("wgIsMainPage"),isWatched:$("#ca-watch").hasClass("watched"),isMissing:0===mw.config.get("wgArticleId"),id:mw.config.get("wgArticleId"),namespaceNumber:mw.config.get("wgNamespaceNumber")})}},"./src/mobile.startup/currentPageHTMLParser.js":(t,e,i)=>{var n,s=i("./src/mobile.startup/PageHTMLParser.js");t.exports=function(){return n||(n=new s($("#content #bodyContent")))}},"./src/mobile.startup/eventBusSingleton.js":t=>{t.exports=new OO.EventEmitter},"./src/mobile.startup/extendSearchParams.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s=i("./src/mobile.startup/actionParams.js");t.exports=function(t){var e,i,r=mw.config.get("wgMFDisplayWikibaseDescriptions")||{search:!0,watchlist:!0,tagline:!1},a=mw.config.get("wgMFScriptPath");if(!Object.prototype.hasOwnProperty.call(r,t))throw new Error('"'+t+"\" isn't a feature that shows Wikibase descriptions.");return(e=Array.prototype.slice.call(arguments,1)).unshift({prop:[]}),e.push(mw.config.get("wgMFSearchAPIParams")),(i=n.extend.apply({},e)).prop=i.prop.concat(mw.config.get("wgMFQueryPropModules")),r[t]&&-1===i.prop.indexOf("description")&&i.prop.push("description"),a&&(i.origin="*"),s(i)}},"./src/mobile.startup/headers.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s=i("./src/mobile.startup/Button.js"),r=i("./src/mobile.startup/icons.js");function a(t,e,i,s){var a="string"==typeof t?t:void 0,o={hasActions:e&&e.length,isHidden:!1,heading:a},l=n.template('\n<div class="overlay-header header '.concat(s||"",' hideable">\n\t<ul class="header-cancel">\n\t\t<li></li>\n\t</ul>\n\t{{{heading}}}\n\t{{#hasActions}}\n\t<div class="header-action"></div>\n\t{{/hasActions}}\n</div>\n\t\t')).render(o);i=i||r.cancel();var c=n.parseHTML(l);return c.find("h2 span").addClass("truncated-text"),c.find(".header-cancel li").append(i.$el),void 0===a&&t.$el.insertAfter(c.find(".header-cancel")),e&&e.length&&c.find(".header-action").append(e.map((function(t){return t.$el}))),c[0]}function o(t,e,i,n){return a(t='<div class="overlay-title"><h2>'.concat(t,"</h2></div>"),e,i,n)}t.exports={savingHeader:function(t){return o(t,[r.spinner({additionalClassNames:"savespinner loading"})],r.cancel(),"saving-header hidden")},saveHeader:function(t,e){return o(t,[new s({tagName:"button",additionalClassNames:"save submit",disabled:!0,label:n.saveButtonMessage(),size:"large"})],r.back(),e)},formHeader:function(t,e,i,n){return a(t,e,i,n)},header:o}},"./src/mobile.startup/icons.js":(t,e,i)=>{var n="close",s=i("./src/mobile.startup/Icon.js"),r=i("./src/mobile.startup/IconButton.js"),a=i("./src/mobile.startup/util.js");t.exports={CANCEL_GLYPH:n,Icon:s,IconButton:r,back:function(){return new r({tagName:"button",icon:"previous-base20",additionalClassNames:"back",label:mw.msg("mobile-frontend-overlay-close")})},cancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?"".concat(n,"-").concat(t):"".concat(n,"-base20");return e.additionalClassNames=e.additionalClassNames||"",e.additionalClassNames+=" cancel",new this.IconButton(a.extend({tagName:"button",icon:i,label:mw.msg("mobile-frontend-overlay-close")},e))},spinner:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===t.additionalClassNames&&(t.additionalClassNames="spinner loading");var e=new this.IconButton(a.extend({tagName:"span",icon:"spinner",label:mw.msg("mobile-frontend-loading-message")},t));return e.$el.removeClass(),e.$el.addClass(t.additionalClassNames),e.$el.attr("type",""),e.options.isIconOnly&&e.$el.addClass("mf-spinner-icon-element"),e},error:function(){return new r({icon:"alert-invert",additionalClassNames:"load-fail-msg-icon"})},watch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.additionalClassNames=t.additionalClassNames||"",t.additionalClassNames+=" watch-this-article",new this.IconButton(a.extend({icon:"star-subtle",glyphPrefix:"mf"},t))},watched:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.additionalClassNames=t.additionalClassNames||"",t.additionalClassNames+=" watch-this-article watched",new this.IconButton(a.extend({icon:"unStar-progressive",glyphPrefix:"mf"},t))}}},"./src/mobile.startup/lazyImages/lazyImageLoader.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s="lazy-image-placeholder";t.exports={placeholderClass:s,queryPlaceholders:function(t){return Array.prototype.slice.call(t.getElementsByClassName(s))},loadImages:function(e){return n.Promise.all(e.map((function(e){return t.exports.loadImage(e).promise})))},loadImage:function(t){var e=n.Deferred(),i=t.dataset.width||"0",s=t.dataset.height||"0",r=new Image(parseInt(i,10),parseInt(s,10));r.className=t.dataset.class||"",r.alt=t.dataset.alt||"",r.useMap=t.dataset.usemap,r.style.cssText=t.style.cssText||"",r.addEventListener("load",(function(){r.classList.add("image-lazy-loaded"),t.parentNode&&t.parentNode.replaceChild(r,t),e.resolve("load")}),{once:!0}),r.addEventListener("error",(function(){t.parentNode&&t.parentNode.replaceChild(r,t),e.resolve("error")}),{once:!0});var a=t.dataset.mwSrc||"";return a&&(r.src=a,r.srcset=t.dataset.mwSrcset||""),{promise:e,image:r}},test:{placeholderClass:s}}},"./src/mobile.startup/mfExtend.js":t=>{t.exports=function(t,e,i){var n;for(n in i?OO.inheritClass(t,e):(OO.initClass(t),i=e),i)t.prototype[n]=i[n]}},"./src/mobile.startup/moduleLoader.js":t=>{function e(){this._register={}}e.prototype={require:function(t){var e,i,n=this._register;function s(){if(!Object.hasOwnProperty.call(n,t))throw new Error("MobileFrontend Module not found: "+t);return n[t]}i=t.split("/");try{return(e=mw.loader.require(i[0]))[i[1]]?e[i[1]]:s()}catch(t){return s()}},define:function(t,e){var i=this;if(Object.hasOwnProperty.call(this._register,t))throw new Error("Module already exists: "+t);return this._register[t]=e,{deprecate:function(n){i.deprecate(n,e,t)}}},deprecate:function(t,e,i){var n;i&&(n="Use "+i+" instead."),mw.log.deprecate(this._register,t,e,n)}},t.exports=e},"./src/mobile.startup/moduleLoaderSingleton.js":(t,e,i)=>{var n=i("./src/mobile.startup/moduleLoader.js");t.exports=new n},"./src/mobile.startup/page/pageJSONParser.js":(t,e,i)=>{var n=i("./src/mobile.startup/Page.js"),s=i("./src/mobile.startup/util.js");t.exports={parse:function(t){var e,i,r=t.thumbnail,a=t.pageprops||{displaytitle:mw.html.escape(t.title)},o=t.terms||t.entityterms;return(a||o)&&(i=o&&o.label?mw.html.escape(o.label[0]):a.displaytitle),t.wikidataDescription=t.description||void 0,r&&(t.thumbnail.isLandscape=r.width>r.height),t.revisions&&t.revisions[0]&&(e=t.revisions[0],t.lastModified=new Date(e.timestamp)),new n(s.extend(t,{id:t.pageid,isMissing:!!t.missing,url:mw.util.getUrl(t.title),displayTitle:i}))}}},"./src/mobile.startup/promoCampaign/promoCampaign.js":t=>{t.exports=function(t,e,i,n,s,r){var a={};for(var o in e){var l=e[o];a[l]="mobile-frontend-".concat(i,"-ineligible-").concat(l)}function c(){return n}function u(t){if(!(t in e))throw new Error("Action '".concat(t,"' not found in 'actions' object. Please add this to\n\t\t\t\tthe object when creating a campaign with promoCampaign.js if you believe\n\t\t\t\tthis is a valid action."))}return{showIfEligible:function(e){if(!function(t){return u(t),c()&&s&&null===r.get(a[t])}(e))return null;for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.apply(void 0,[e].concat(n))},makeActionIneligible:function(t){return u(t),r.set(a[t],"~")},makeAllActionsIneligible:function(){var t,i;for(t in e)i=e[t],this.makeActionIneligible(i)},isCampaignActive:c}}},"./src/mobile.startup/showOnPageReload.js":t=>{var e="mobileFrontend/toast";mw.requestIdleCallback((function(){var t=mw.storage.get(e);t&&(t=JSON.parse(t),mw.notify(t.content,t.options),mw.storage.remove(e))})),t.exports={showOnPageReload:function(t,i){mw.storage.get(e)?mw.log.warn("A pending toast message already exits. The page should have been reloaded by now."):mw.storage.set(e,JSON.stringify({content:t,options:i}))}}},"./src/mobile.startup/util.js":t=>{t.exports={saveButtonMessage:function(){return mw.config.get("wgEditSubmitButtonLabelPublish")?mw.msg("mobile-frontend-editor-publish"):mw.msg("mobile-frontend-editor-save")},Promise:{all:function(t){return $.when.apply($,t)}},escapeSelector:function(t){return $.escapeSelector(t)},docReady:function(t){return $(t)},Deferred:function(){return $.Deferred()},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(t,e){return e=e||document,$($.parseHTML(t,e))},extend:function(){return $.extend.apply($,arguments)},template:function(t){return{getSource:function(){return t},render:function(e,i){var n={};return Object.keys(i||{}).forEach((function(t){n[t]=i[t].getSource()})),Mustache.render(t.trim(),e,n)}}}}},"./src/mobile.startup/watchstar/WatchstarGateway.js":(t,e,i)=>{var n=i("./src/mobile.startup/util.js"),s=i("./src/mobile.startup/actionParams.js");function r(t){this.api=t}r.prototype={getStatuses:function(t,e){return n.Promise.all([this.getStatusesByID(t),this.getStatusesByTitle(e)]).then((function(){return n.extend.apply(n,arguments)}))},getStatusesByID:function(t){var e=this;return t.length?this.api.get({formatversion:2,action:"query",prop:"info",inprop:"watched",pageids:t}).then((function(t){return e._unmarshalGetResponse(t)})):n.Deferred().resolve({})},getStatusesByTitle:function(t){var e=this;return t.length?this.api.get(s({prop:"info",inprop:"watched",titles:t})).then((function(t){return e._unmarshalGetResponse(t)})):n.Deferred().resolve({})},postStatusesByTitle:function(t,e){var i={action:"watch",titles:t};return e||(i.unwatch=!e),this.api.postWithToken("watch",i)},_unmarshalGetResponse:function(t){return(t&&t.query&&t.query.pages||[]).reduce((function(t,e){return t[e.title]=e.watched,t}),{})}},t.exports=r},"./src/mobile.startup/watchstar/WatchstarPageList.js":(t,e,i)=>{var n=i("./src/mobile.startup/PageList.js"),s=i("./src/mobile.startup/watchstar/watchstar.js"),r=mw.user,a=i("./src/mobile.startup/util.js"),o=i("./src/mobile.startup/Page.js"),l=i("./src/mobile.startup/mfExtend.js"),c=i("./src/mobile.startup/watchstar/WatchstarGateway.js");function u(t){this.wsGateway=new c(t.api),n.apply(this,arguments)}l(u,n,{postRender:function(){var t,e,i=this,s=[],r=[];return n.prototype.postRender.apply(this),t=this.queryUnitializedItems(),e=this.parsePagesFromItems(t),Object.keys(e).forEach((function(t){var i=e[t];i&&"0"!==i?s.push(i):r.push(t)})),this.getPages(s,r).then((function(e){i.renderItems(t,e)}))},queryUnitializedItems:function(){return this.$el.find("li:not(.with-watchstar)")},getPages:function(t,e){return r.isAnon()?a.Deferred().resolve({}):this.wsGateway.getStatuses(t,e)},parsePagesFromItems:function(t){var e=this,i={};return t.each((function(t,n){var s=e.$el.find(n);i[s.attr("title")]=s.data("id")})),i},renderItems:function(t,e){var i=this;r.isAnon()||t.each((function(t,n){var s=i.$el.find(n),r=new o({sections:[],title:s.attr("title"),id:s.data("id")}),a=e[r.getTitle()];i._appendWatchstar(s,r,a),s.addClass("with-watchstar")}))},_appendWatchstar:function(t,e,i){s({isWatched:i,page:e}).appendTo(t)}}),t.exports=u},"./src/mobile.startup/watchstar/watchstar.js":(t,e,i)=>{var n=i("./src/mobile.startup/icons.js");t.exports=function(t){var e=t.isWatched,i=mw.loader.require("mediawiki.page.watch.ajax").watchstar,s=e?"unwatch":"watch",r={href:mw.Title.newFromText(t.page.title).getUrl({action:s})},a=n.watch(r),o=n.watched(r),l=a.getClassName(),c=o.getClassName(),u=a.getIcon().getClassName(),d=o.getIcon().getClassName(),p=e?o:a;return i(p.$el,t.page.title,(function(t,e){t.attr("class",e?c:l),t.find(".mf-icon").attr("class",e?d:u)})),p}}}]);
//# sourceMappingURL=mobile.common.js.map.json