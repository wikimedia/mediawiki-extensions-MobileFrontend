this.mfModules=this.mfModules||{},this.mfModules["mobile.editor.ve"]=(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./src/mobile.editor.ve/mobile.editor.ve.js":function(e,t,o){var i=o("./src/mobile.editor.ve/ve.init.mw.MobileFrontendArticleTarget.js"),r=o("./src/mobile.editor.ve/schemaVisualEditorFeatureUse.js");ve.init.mw.MobileFrontendArticleTarget=i,ve.init.mw.targetFactory.register(i),r(),ve.trackSubscribe("activity.",function(e,t){mw.track("mf.schemaVisualEditorFeatureUse",ve.extendObject(t,{feature:e.split(".")[1],editing_session_id:ve.init.target.overlay.sessionId}))})},"./src/mobile.editor.ve/schemaVisualEditorFeatureUse.js":function(e,t){e.exports=function(){var e=!!mw.util.getParamValue("trackdebug");(null!==mw.loader.getState("schema.VisualEditorFeatureUse")||e)&&mw.loader.using(["ext.eventLogging.subscriber"]).then(function(){var t=mw.eventLog.Schema,o=mw.config.get("wgWMESchemaEditAttemptStepSamplingRate"),i=new t("VisualEditorFeatureUse",o);mw.trackSubscribe("mf.schemaVisualEditorFeatureUse",function(t,r){var n={feature:r.feature,action:r.action,editingSessionId:r.editing_session_id};e?function(){console.log.apply(console,arguments)}(t,n):i.log(n,mw.config.get("wgWMESchemaEditAttemptStepOversample")?1:o)})})}},"./src/mobile.editor.ve/ve.init.mw.MobileFrontendArticleTarget.js":function(e,t,o){
/*!
 * VisualEditor MediaWiki Initialization MobileFrontendArticleTarget class.
 *
 * @copyright 2011-2015 VisualEditor Team and others; see AUTHORS.txt
 * @license The MIT License (MIT); see LICENSE.txt
 */
var i=ve.init.mw.MobileArticleTarget,r=o("./src/mobile.editor.overlay/parseSaveError.js"),n=ve.init.mw.Target;function s(e,t){this.overlay=e,this.$overlay=e.$el,this.$overlaySurface=e.$el.find(".surface"),this.useScrollContainer=ve.init.platform.constructor.static.isIos(),s.super.call(this,t),this.onWindowScrollDebounced=ve.debounce(this.onWindowScroll.bind(this),100),$(this.getElementWindow()).on("scroll",this.onWindowScrollDebounced),this.$element.addClass("ve-init-mw-mobileFrontendArticleTarget")}OO.inheritClass(s,i),s.static.parseSaveError=r,s.prototype.destroy=function(){s.super.prototype.destroy.call(this),$(this.getElementWindow()).off("scroll",this.onWindowScrollDebounced),this.$overlay.css("padding-top","")},s.prototype.getScrollContainer=function(){return this.useScrollContainer?this.overlay.$el.find(".overlay-content"):s.super.prototype.getScrollContainer.call(this)},s.prototype.isToolbarOverSurface=function(){return!0},s.prototype.onContainerScroll=function(){},s.prototype.onWindowScroll=function(){var e,t,o,i=this.surface,r=i.getView();this.useScrollContainer&&r.isFocused()&&!r.deactivated&&(t=(e=$(this.getElementWindow())).scrollTop(),o=this.$scrollContainer.scrollTop(),e.scrollTop(0),i.scrollTo(o+t),i.scrollCursorIntoView(this.getSurface()))},s.prototype.onSurfaceScroll=function(){var e,t;ve.init.platform.constructor.static.isIos()&&(e=this.getSurface().getView().nativeSelection).rangeCount&&"true"===document.activeElement.contentEditable&&(t=e.getRangeAt(0),e.removeAllRanges(),e.addRange(t))},s.prototype.createSurface=function(e,t){var o;return this.overlay.isNewPage&&(t=ve.extendObject({placeholder:mw.msg("mobile-frontend-editor-placeholder-new-page",mw.user)},t)),(o=s.super.prototype.createSurface.call(this,e,t)).connect(this,{scroll:"onSurfaceScroll"}),o},s.prototype.setSurface=function(e){var t=e!==this.surface;n.super.prototype.setSurface.apply(this,arguments),t&&(e.$element.addClass("content loading"),this.$overlaySurface.append(e.$element))},s.prototype.surfaceReady=function(){var e=this.getSurface();s.super.prototype.surfaceReady.apply(this,arguments),this.overlay.hideSpinner(),e.$element.removeClass("loading"),e.getContext().connect(this,{resize:"adjustContentPadding"}),this.adjustContentPadding(),this.maybeShowWelcomeDialog()},s.prototype.adjustContentPadding=function(){var e=this.getToolbar().$element.outerHeight();this.getSurface().setToolbarHeight(e),this.$overlay.css("padding-top",e),this.getSurface().scrollCursorIntoView()},s.prototype.loadFail=function(e,t){s.super.prototype.loadFail.apply(this,arguments),this.overlay.reportError(t),this.overlay.hide()},s.prototype.editSource=function(){var e=this;this.getSurface().getModel().hasBeenModified()?OO.ui.confirm(mw.msg("mobile-frontend-editor-switch-confirm")).then(function(t){t&&e.showSaveDialog()}):this.overlay.switchToSourceEditor()},s.prototype.save=function(){s.super.prototype.save.apply(this,arguments),this.overlay.log({action:"saveAttempt"})},s.prototype.showSaveDialog=function(){s.super.prototype.showSaveDialog.apply(this,arguments),this.overlay.log({action:"saveIntent"})},s.prototype.saveComplete=function(){var e=this.getSectionFragmentFromPage();s.super.prototype.saveComplete.apply(this,arguments),this.overlay.sectionLine="#"+e,this.overlay.onSaveComplete()},s.prototype.saveFail=function(e,t,o,i,r,n){s.super.prototype.saveFail.apply(this,arguments),this.overlay.onSaveFailure(this.constructor.static.parseSaveError(n,r))},s.prototype.tryTeardown=function(){s.super.prototype.tryTeardown.apply(this,arguments).then(function(){window.history.back()})},e.exports=s}},[["./src/mobile.editor.ve/mobile.editor.ve.js",0,1]]]);
//# sourceMappingURL=mobile.editor.ve.js.map.json