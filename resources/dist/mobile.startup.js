(self.webpackChunkmfModules=self.webpackChunkmfModules||[]).push([[380],{"./src/mobile.startup/LanguageInfo.js":(e,s,t)=>{const r=t("./src/mobile.startup/util.js"),a=t("./src/mobile.startup/actionParams.js");e.exports=class{constructor(e){this.api=e}getLanguages(){return this.api.get(a({meta:"languageinfo",liprop:"code|autonym|name|bcp47"})).then((e=>{const s=[];return Object.keys(e.query.languageinfo).forEach((t=>{const r=e.query.languageinfo[t];r.code.toLowerCase()===r.bcp47.toLowerCase()&&r.autonym&&s.push(r)})),s}),(()=>r.Deferred().reject())).then((e=>({languages:e.map((e=>(e.url="#",e.lang=e.code,e.langname=e.name,e.title=e.name,e)))})),(()=>r.Deferred().reject()))}}},"./src/mobile.startup/MessageBox.js":(e,s,t)=>{const r=t("./src/mobile.startup/View.js"),a=t("./src/mobile.startup/util.js");e.exports=class extends r{constructor(e){super(e)}get isTemplateMode(){return!0}get defaults(){return{}}get template(){return a.template('\n<div\n  class="cdx-message cdx-message--block cdx-message--{{type}} {{className}}"\n  aria-live="polite"\n>\n  \x3c!-- Empty span for message icon. --\x3e\n  <span class="cdx-message__icon"></span>\n  \x3c!-- Div for content. --\x3e\n  <div class="cdx-message__content">\n  {{#heading}}<h2>{{heading}}</h2>{{/heading}}\n  {{{msg}}}\n  </div>\n</div>\n\t')}}},"./src/mobile.startup/Section.js":(e,s,t)=>{const r=t("./src/mobile.startup/util.js"),a=t("./src/mobile.startup/View.js");class n extends a{constructor(e){e.tag="h"+e.level,super(e),this.line=e.line,this.text=e.text,this.hasReferences=e.hasReferences||!1,this.id=e.id||null,this.anchor=e.anchor,this.subsections=[],(e.subsections||[]).forEach((e=>this.subsections.push(new n(e))))}get template(){return r.template('\n<h{{level}} id="{{anchor}}">{{{line}}}</h{{level}}>\n{{{text}}}\n\t')}get defaults(){return{line:void 0,text:""}}}e.exports=n},"./src/mobile.startup/languageOverlay/getDeviceLanguage.js":e=>{e.exports=function(e){const s=e.languages?e.languages[0]:e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;return s?s.toLowerCase():void 0}},"./src/mobile.startup/languageOverlay/languageInfoOverlay.js":(e,s,t)=>{const r=t("./src/mobile.startup/moduleLoaderSingleton.js"),a=t("./src/mobile.startup/languageOverlay/getDeviceLanguage.js"),n=t("./src/mobile.startup/Overlay.js"),o=t("./src/mobile.startup/promisedView.js");function i(e,s){return mw.loader.using("mobile.languages.structured").then((()=>e.getLanguages())).then((e=>new(r.require("mobile.languages.structured/LanguageSearcher"))({languages:e.languages,variants:e.variants,showSuggestedLanguages:s,deviceLanguage:a(navigator)})))}function l(e,s){return n.make({heading:mw.msg("mobile-frontend-language-heading"),className:"overlay language-info-overlay"},o(i(e,s)))}l.test={loadLanguageInfoSearcher:i},e.exports=l},"./src/mobile.startup/languageOverlay/languageOverlay.js":(e,s,t)=>{const r=t("./src/mobile.startup/moduleLoaderSingleton.js"),a=t("./src/mobile.startup/languageOverlay/getDeviceLanguage.js"),n=t("./src/mobile.startup/Overlay.js"),o=t("./src/mobile.startup/MessageBox.js"),i=t("./src/mobile.startup/currentPageHTMLParser.js")(),l=t("./src/mobile.startup/promisedView.js");function c(){return mw.loader.using("mobile.languages.structured").then((()=>i.getLanguages(mw.config.get("wgTitle")))).then((e=>new(r.require("mobile.languages.structured/LanguageSearcher"))({languages:e.languages,variants:e.variants,showSuggestedLanguages:!0,deviceLanguage:a(navigator),onOpen:e=>mw.hook("mobileFrontend.languageSearcher.onOpen").fire(e)})),(()=>new o({type:"error",className:"content",msg:mw.msg("mobile-frontend-languages-structured-overlay-error")})))}function u(){return n.make({heading:mw.msg("mobile-frontend-language-heading"),className:"overlay language-overlay"},l(c()))}u.test={loadLanguageSearcher:c},e.exports=u},"./src/mobile.startup/mediaViewer/overlay.js":(e,s,t)=>{const r=t("./src/mobile.startup/moduleLoaderSingleton.js"),a=t("./src/mobile.startup/promisedView.js"),n=t("./src/mobile.startup/util.js"),o=t("./src/mobile.startup/headers.js").header,i=t("./src/mobile.startup/icons.js"),l=t("./src/mobile.startup/Overlay.js");e.exports=function(e){return l.make({headers:[o("",[],i.cancel("gray"))],className:"overlay media-viewer"},a(n.Promise.all([mw.loader.using("mobile.mediaViewer")]).then((()=>new(0,r.require("mobile.mediaViewer").ImageCarousel)(e)))))}},"./src/mobile.startup/mobile.startup.js":(e,s,t)=>{const r=t("./src/mobile.startup/currentPageHTMLParser.js"),a=t("./src/mobile.startup/time.js"),n=t("./src/mobile.startup/LanguageInfo.js"),o=t("./src/mobile.startup/currentPage.js"),i=t("./src/mobile.startup/Drawer.js"),l=t("./src/mobile.startup/CtaDrawer.js"),c=t("./src/mobile.startup/lazyImages/lazyImageLoader.js"),u=t("./src/mobile.startup/icons.js"),m=t("./src/mobile.startup/PageHTMLParser.js"),g=t("./src/mobile.startup/showOnPageReload.js"),d=t("./src/mobile.startup/OverlayManager.js"),p=t("./src/mobile.startup/View.js"),f=t("./src/mobile.startup/Overlay.js"),b=t("./src/mobile.startup/references/references.js"),h=t("./src/mobile.startup/promisedView.js"),w=t("./src/mobile.startup/headers.js"),j=t("./src/mobile.startup/Skin.js"),v={overlay:t("./src/mobile.startup/mediaViewer/overlay.js")},y=t("./src/mobile.startup/languageOverlay/languageInfoOverlay.js"),x=t("./src/mobile.startup/languageOverlay/languageOverlay.js"),R=t("./src/mobile.startup/amcOutreach/amcOutreach.js"),L=t("./src/mobile.startup/util.js"),O=t("./src/mobile.startup/actionParams.js"),S=t("./src/mobile.startup/Icon.js"),T=t("./src/mobile.startup/IconButton.js"),M=t("./src/mobile.startup/MessageBox.js"),I=t("./src/mobile.startup/Section.js"),C=t("./src/mobile.startup/Button.js");e.exports={actionParams:O,util:L,amcOutreach:R,headers:w,overlayHeader:w.header,Drawer:i,CtaDrawer:l,class:{View:p,Overlay:f,Section:I,MessageBox:M,Icon:S,IconButton:T,Button:C},View:{make:p.make},Overlay:{make:f.make},currentPageHTMLParser:r,getOverlayManager:()=>d.getSingleton(),currentPage:o,PageHTMLParser:m,spinner:u.spinner,cancelIcon:u.cancel,mediaViewer:v,references:b,time:a,promisedView:h,loadAllImagesInPage:()=>c.loadImages(c.queryPlaceholders(document.getElementById("content"))),notifyOnPageReload:e=>g(e),license:()=>j.getSingleton().getLicenseMsg(),languages:{languageOverlay:x,languageInfoOverlay:(e,s)=>y(new n(e),s)}}},"./src/mobile.startup/promisedView.js":(e,s,t)=>{const r=t("./src/mobile.startup/icons.js"),a=t("./src/mobile.startup/View.js");e.exports=function(e){const s=new a({className:"promised-view"});return s.$el.append(r.spinner().$el),e.then((e=>{s.$el.replaceWith(e.$el),s.$el=e.$el}),(e=>{e&&e.$el&&(s.$el.replaceWith(e.$el),s.$el=e.$el)})),s}},"./src/mobile.startup/references/ReferencesGateway.js":e=>{class s{constructor(e){this.api=e}getReference(e,s,t){}}s.ERROR_NOT_EXIST="NOT_EXIST_ERROR",s.ERROR_OTHER="OTHER_ERROR",e.exports=s},"./src/mobile.startup/references/ReferencesHtmlScraperGateway.js":(e,s,t)=>{const r=t("./src/mobile.startup/references/ReferencesGateway.js"),a=t("./src/mobile.startup/util.js");e.exports=class extends r{constructor(){super(arguments),this.EXTERNAL_LINK_CLASS="external--reference"}getReferenceFromContainer(e,s){const t=a.Deferred(),n=s.find("#"+a.escapeSelector(e));if(n.length){let e;const s=n.closest("ol"),r=s.hasClass("mw-subreference-list");r&&(e=s.parent()),(e||n).find(".external").addClass(this.EXTERNAL_LINK_CLASS),t.resolve({text:this.getReferenceHtml(n),parentText:this.getReferenceHtml(e),isSubref:r})}else t.reject(r.ERROR_NOT_EXIST);return t.promise()}getReferenceHtml(e){return e?e.children(".mw-reference-text, .reference-text").first().html():""}getReference(e,s,t){const r=mw.util.percentDecodeFragment(e.slice(1));return this.getReferenceFromContainer(r,t.$el.find("ol.references"))}}},"./src/mobile.startup/references/references.js":(e,s,t)=>{const r=t("./src/mobile.startup/Drawer.js"),a=t("./src/mobile.startup/util.js"),n=t("./src/mobile.startup/icons.js"),o=t("./src/mobile.startup/references/ReferencesGateway.js"),i=t("./src/mobile.startup/Icon.js"),l=t("./src/mobile.startup/references/ReferencesHtmlScraperGateway.js"),c=t("./src/mobile.startup/IconButton.js");function u(e){return s=>{const t=s.currentTarget.querySelector("a");if(t)return e(t.getAttribute("href"),t.textContent),!1}}function m(e){const s=e.error?new c({name:"error",isSmall:!0}).$el:null,t=e.isSubref?e.parentText:e.text,o=a.parseHTML("<div>").addClass("main-reference-content").html(t);t||o.append(n.spinner().$el);const l=e.isSubref?a.parseHTML("<div>").html(e.text):"";return new r(a.extend({showCollapseIcon:!1,className:"drawer position-fixed text references-drawer",events:{"click sup a":e=>{e.preventDefault()},"click sup":e.onNestedReferenceClick&&u(e.onNestedReferenceClick)},children:[a.parseHTML("<div>").addClass("references-drawer__header").append([new i({icon:"reference",isSmall:!0}).$el,a.parseHTML("<span>").addClass("references-drawer__title").text(mw.msg("mobile-frontend-references-citation")),n.cancel("gray",{isSmall:!0}).$el]),a.parseHTML("<div>").addClass("mw-parser-output").append([s,a.parseHTML("<sup>").text(e.title),o,l])]},e))}const g={test:{makeOnNestedReferenceClickHandler:u},ReferencesHtmlScraperGateway:l,referenceDrawer:m,showReference:(e,s,t,r,n,i,l)=>n.getReference(e,s,r).then((e=>{const o=m(a.extend({title:t,text:e.text,parentText:e.parentText,isSubref:e.isSubref,onNestedReferenceClick(e,t){g.showReference(e,s,t,r,n).then((e=>{i.onShowNestedReference?l(o,e):(mw.log.warn("Please provide onShowNestedReferences parameter."),document.body.appendChild(e.$el[0]),o.hide(),e.show())}))}},i));return o}),(e=>{if(e!==o.ERROR_NOT_EXIST)return m({error:!0,title:t,text:mw.msg("mobile-frontend-references-citation-error")})}))};e.exports=g},"./src/mobile.startup/time.js":(e,s,t)=>{const r=["seconds","minutes","hours","days","months","years"],a=t("./src/mobile.startup/util.js"),n=[1,60,3600,86400,2592e3,31536e3];function o(e){let s=0;for(;s<n.length&&e>n[s+1];)++s;return{value:Math.round(e/n[s]),unit:r[s]}}function i(e){return o(Math.round(Date.now()/1e3)-e)}function l(e){return"seconds"===e.unit&&e.value<10}e.exports={getLastModifiedMessage:function(e,s,t,r){const n=void 0===r,o=[];t=t||"unknown";const c=i(e);l(c)?o.push("mobile-frontend-last-modified-with-user-just-now",t,s):o.push({seconds:"mobile-frontend-last-modified-with-user-seconds",minutes:"mobile-frontend-last-modified-with-user-minutes",hours:"mobile-frontend-last-modified-with-user-hours",days:"mobile-frontend-last-modified-with-user-days",months:"mobile-frontend-last-modified-with-user-months",years:"mobile-frontend-last-modified-with-user-years"}[c.unit],t,s,mw.language.convertNumber(c.value));const u=n?a.parseHTML("<strong>").attr("class","last-modified-text-accent"):a.parseHTML("<a>").attr("href",r||"#"),m=n?a.parseHTML("<span>").attr("class","last-modified-text-accent"):a.parseHTML("<a>").attr("href",mw.util.getUrl("User:"+s));return o.push(u,mw.language.convertNumber(s?1:0),s?m:""),mw.message.apply(this,o).parse()},getRegistrationMessage:function(e,s){const t=[];s=s||"unknown";const r=i(parseInt(e,10));return l(r)?t.push("mobile-frontend-joined-just-now",s):t.push({seconds:"mobile-frontend-joined-seconds",minutes:"mobile-frontend-joined-minutes",hours:"mobile-frontend-joined-hours",days:"mobile-frontend-joined-days",months:"mobile-frontend-joined-months",years:"mobile-frontend-joined-years"}[r.unit],s,mw.language.convertNumber(r.value)),mw.message.apply(this,t).parse()},timeAgo:o,getTimeAgoDelta:i,isNow:l,isRecent:function(e){return["seconds","minutes","hours"].indexOf(e.unit)>-1}}}},e=>{e.O(0,[569],(()=>e(e.s="./src/mobile.startup/mobile.startup.js")));var s=e.O();(this.mfModules=this.mfModules||{})["mobile.startup"]=s}]);
//# sourceMappingURL=mobile.startup.js.map.json