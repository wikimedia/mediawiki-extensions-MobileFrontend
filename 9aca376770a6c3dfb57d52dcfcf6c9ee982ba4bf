{
  "comments": [
    {
      "key": {
        "uuid": "34da7a2a_fb460e66",
        "filename": "src/mobile.init/BetaOptInPanel.js",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-21T21:12:47Z",
      "side": 1,
      "message": "Did you consider using a template here.\n\nIt\u0027s my understanding that removing templatePartials is a good thing, as a templatePartial is basically a component in a disguise, but there\u0027s nothing wrong with templates in general IMO.\n\nThe danger of this is if text contains html (which is possible with messages) these could render as HTML. It must be escaped (Hogan was doing that for you but now you must do it)",
      "revId": "9aca376770a6c3dfb57d52dcfcf6c9ee982ba4bf",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a1c0296_10167ac8",
        "filename": "src/mobile.init/BetaOptInPanel.js",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 2426
      },
      "writtenOn": "2019-03-26T18:14:32Z",
      "side": 1,
      "message": "This still uses a template just not a Mustache template. I think this approach is simpler. I\u0027m especially interested in an approach like Viewless demo[0] which is similar to Popups and uses (or will use) mw.html.escape(). Do you disagree?\n\nWe can still use the Hogan flavored template if you think it\u0027s worthwhile. It would fit in this patch easily enough but I don\u0027t think it helps our goals in the short or the long term.\n\nI\u0027m very interested to discuss short term component composition more and have added a bullet to the next super-happy-dev-time.\n\n[0] https://gerrit.wikimedia.org/r/#/c/mediawiki/extensions/MobileFrontend/+/498196/",
      "parentUuid": "34da7a2a_fb460e66",
      "revId": "9aca376770a6c3dfb57d52dcfcf6c9ee982ba4bf",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2fc66c19_b0102e87",
        "filename": "src/mobile.init/BetaOptInPanel.js",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-27T00:56:34Z",
      "side": 1,
      "message": "\u003e  Viewless demo[0] which is similar to Popups and uses (or will use) mw.html.escape(). Do you disagree?\n\nI do disagree. As I recall we used templates in Popups because we decided it wasn\u0027t worth adding a template library to Popups for such a small use case and we were already string stitching. I don\u0027t think we should follow it\u0027s lead. MobileFrontend is a very different codebase with templating an important part.\n\nThe fact is, despite being unfashionable, we have a template library available - Hogan and it provides much more safety to us from mistakes.\n\nIn this patch, text is coming from a MediaWiki message (which is not being escaped!!!) and introducing a vector of attack as HTML is perfectly valid in mediawiki messages. I\u0027d rather we didn\u0027t encourage HTML creation like this for this reason.\n\nI think given we\u0027re using Hogan across the codebase we should stick with what we have until we have a decision over the long term solution for templates.\n\nI\u0027d actually like us to at least on the short term switch Hogan out for Mustache because it seems to be smaller these days, is better maintained and is already defined in core so will not require an RFC or security review. Our annual goal around making Minerva  independent on MobileFrontend seems to demand this.\n\nLong term, I\u0027d be really interested in something like JSX which is escaped by default (and discourages HTML inputs with its scarily named dangerouslyInsertHTML parameter).\n\nMy biggest concern with MobileFrontend right now is we roll our own code in a lot of places and do things consistently and I\u0027d rather not add more complexity to the templating portion.",
      "parentUuid": "2a1c0296_10167ac8",
      "revId": "9aca376770a6c3dfb57d52dcfcf6c9ee982ba4bf",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28c2ada4_f83b5d1c",
        "filename": "src/mobile.init/BetaOptInPanel.js",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-21T21:12:47Z",
      "side": 1,
      "message": "Note, if using jQuery you could do $form.append( [ new Button().$el, new Button().$el ] );\n\nThis might be more readable at the trade off of using jQuery.",
      "revId": "9aca376770a6c3dfb57d52dcfcf6c9ee982ba4bf",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2781ad3a_32b0fa05",
        "filename": "src/mobile.init/BetaOptInPanel.js",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 2426
      },
      "writtenOn": "2019-03-26T18:14:32Z",
      "side": 1,
      "message": "Makes sense. My personal preference is to avoid jQuery unless it has great prevalence in a file. I\u0027d be happy to make the few refactors from jQuery to DOM in this file if that improves the reception.",
      "parentUuid": "28c2ada4_f83b5d1c",
      "revId": "9aca376770a6c3dfb57d52dcfcf6c9ee982ba4bf",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e32e232e_0d900dbc",
        "filename": "src/mobile.init/BetaOptInPanel.js",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-27T00:56:34Z",
      "side": 1,
      "message": "I figured as much.",
      "parentUuid": "2781ad3a_32b0fa05",
      "revId": "9aca376770a6c3dfb57d52dcfcf6c9ee982ba4bf",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}