{
  "comments": [
    {
      "key": {
        "uuid": "3c76eb06_7f459ea8",
        "filename": "src/mobile.mediaViewer/ImageCarousel.js",
        "patchSetId": 47
      },
      "lineNbr": 267,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "Is there a reason not to use events object?",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db96b8fb_0756ea6e",
        "filename": "src/mobile.mediaViewer/ImageCarousel.js",
        "patchSetId": 47
      },
      "lineNbr": 267,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "used in latest patch",
      "parentUuid": "3c76eb06_7f459ea8",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fac09050_8cf668a1",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 70,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "Rather than decorate the View with this function could be make this a private function that takes this.$el and this.props ?\n\nIt is not used outside this class but is made publicly available so I worry it might get used by others.",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6478d116_4ffa0a00",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 70,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "removed/fixed in latest patch",
      "parentUuid": "fac09050_8cf668a1",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8da17030_02946410",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 71,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "This seems strange to me.\nWould it not make sense for makeOverlayComponents to manage this class and leave this component super dumb?",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e98aedc5_b6c45d49",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 71,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "In latest patch, I replaced this with the ability to pass in additional css classes",
      "parentUuid": "8da17030_02946410",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "549bb632_5915c703",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 86,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "Does this need to be a smart component or are there other ways to do this change while keeping it dumb?",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "162ea59a_ce570a42",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 86,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "make this dumb in I549add34101d58439b25265473a3a611c3324154",
      "parentUuid": "549bb632_5915c703",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac912f6c_f919bf0c",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 110,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "I\u0027m not sure about this pattern. wouldn\u0027t it be better to just create them and append?\n\nYou may also find View.make useful for reducing the code you need here:\nhttps://gerrit.wikimedia.org/r/#/c/mediawiki/extensions/MobileFrontend/+/495140/7/src/mobile.startup/View.js\n\nOr maybe return the template?",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4be5451_c2a4e918",
        "filename": "src/mobile.mediaViewer/ImageDetails.js",
        "patchSetId": 47
      },
      "lineNbr": 110,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "I think I\u0027ve improved this in I549add34101d58439b25265473a3a611c3324154 . Let me know if not",
      "parentUuid": "ac912f6c_f919bf0c",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "60d25803_0d8c3385",
        "filename": "src/mobile.mediaViewer/rerenderProps.js",
        "patchSetId": 47
      },
      "lineNbr": 1,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "TBH I\u0027m struggling with my review of this code, as we are adding some state handling and I\u0027d rather avoid that if we can so that we keep components dumb.\n\nI\u0027m going to need some time to digest this!\n\nMy thinking is that even though we don\u0027t have super fast virtual DOM diffing, it might keep our code simpler if we re-render an entire component based on a changing state.\n\n\n/**\n * Swap views\n * @param {View} component\n * @param {View} newComponent\n * @return {View} new view\n */\nfunction swapComponent( component, newComponent ) {\n\tcomponent.$el.replaceWith( newComponent.$el );\n\treturn newComponent;\n}\n\nSo instead of calling imageCarousel.update and imageDetails.update we create a new instance and replace it.\n\nThis would keep our components dumb and logic free and would help us adopt React or redux later on IMO.",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2a17948_a7254ffc",
        "filename": "src/mobile.mediaViewer/rerenderProps.js",
        "patchSetId": 47
      },
      "lineNbr": 1,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "I removed this in latest patches and added your suggested function in Ibd1cbc6bad2d7d3cf9fffb5e40001e107e7f3333 . Thanks for the suggestion! Now setState will be exclusively used to update the view of components.\n\nAt some point, we will need a stateful component that handles the toggling of the details bar, etc. In latest patches, I made carousel.js a presentational component and imageCarousel.js a stateful one that uses carousel.js.",
      "parentUuid": "60d25803_0d8c3385",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83f9aada_626f2920",
        "filename": "src/mobile.startup/image/overlay.js",
        "patchSetId": 47
      },
      "lineNbr": 20,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "Is this check necessary?\nWhy not always use mw.loader.using( \u0027mobile.mediaViewer\u0027 ). - it will resolve right away if the module is loaded.",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "add61440_75a0cfeb",
        "filename": "src/mobile.startup/image/overlay.js",
        "patchSetId": 47
      },
      "lineNbr": 20,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-08T23:58:08Z",
      "side": 1,
      "message": "I noticed a slight but unsightly flicker of  the components including the navigation buttons when using only mw.loader.using . I think this is because of waiting for the next tick of the event loop due to the mw.loader.using promise",
      "parentUuid": "83f9aada_626f2920",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b14c67d9_d8d899b9",
        "filename": "src/mobile.startup/image/overlay.js",
        "patchSetId": 47
      },
      "lineNbr": 20,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-09T00:00:39Z",
      "side": 1,
      "message": "this occurred whenever clicking the navigation buttons. I think the overlay closes, then appears with the nav buttons missing while the promise is waiting to resolve",
      "parentUuid": "add61440_75a0cfeb",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3914e3f1_3f5cd535",
        "filename": "src/mobile.startup/image/overlay.js",
        "patchSetId": 47
      },
      "lineNbr": 64,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "This is a code smell to me. It means we\u0027re not really using the Overlay class.\nSending noHeader and appending below to \toverlay.$el.find( \u0027.overlay-content\u0027 ) instead of overlay.$el visually looks the same but structurally is now more in line with an overlay.",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b41d2668_9892de34",
        "filename": "src/mobile.startup/image/overlay.js",
        "patchSetId": 47
      },
      "lineNbr": 64,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "I made use of overlay-content in latest patch. I had to add some additional styles to image-overlay to make it look the same but I think i looks the same now.",
      "parentUuid": "3914e3f1_3f5cd535",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "81831589_3baafd4f",
        "filename": "src/mobile.startup/image/overlay.js",
        "patchSetId": 47
      },
      "lineNbr": 66,
      "author": {
        "id": 94
      },
      "writtenOn": "2019-03-08T22:29:37Z",
      "side": 1,
      "message": "You can use Overlay.make( {}, View.make( {}, [\n\t\tloadOrMakeComponents( props, overlay ).$el,\n\t\ticons.cancel( \u0027gray\u0027 ).$el\n\n] );\n\n(also maybe making make accept a child would allow us to pass the components without the $el? waht do you think?\n\nhttps://gerrit.wikimedia.org/r/495140",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "934cbd08_abd422ca",
        "filename": "src/mobile.startup/image/overlay.js",
        "patchSetId": 47
      },
      "lineNbr": 66,
      "author": {
        "id": 6176
      },
      "writtenOn": "2019-03-12T16:25:30Z",
      "side": 1,
      "message": "the problem is I need to pass the reference to the overlay into loadOrMakeComponents so I don\u0027t think I can use Overlay.make here. The View.make pattern could be useful other places though",
      "parentUuid": "81831589_3baafd4f",
      "revId": "1341e8ba2b235e79bce438f7dcc071443457bc21",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}