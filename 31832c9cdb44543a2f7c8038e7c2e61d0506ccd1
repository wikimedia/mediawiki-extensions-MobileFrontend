{
  "comments": [
    {
      "key": {
        "uuid": "Dqn5xCd0",
        "filename": "MobileFrontend.php",
        "patchSetId": 2
      },
      "lineNbr": 751,
      "author": {
        "id": 91
      },
      "writtenOn": "2013-03-21T16:50:38Z",
      "side": 1,
      "message": "Shouldn\u0027t this be an array of possible handshake URLs? In one limitted usecase, we only need this for commons, but this should be able to support all WMF domains.",
      "revId": "31832c9cdb44543a2f7c8038e7c2e61d0506ccd1",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "DqiH1tIA",
        "filename": "MobileFrontend.php",
        "patchSetId": 2
      },
      "lineNbr": 751,
      "author": {
        "id": 94
      },
      "writtenOn": "2013-03-21T18:32:54Z",
      "side": 1,
      "message": "Let\u0027s not complicate the solution by introducing more handshaking. It\u0027s a workaround and currently it allows us to achieve our goal of uploading to commons.\n\nI would want a more long term solution then improving this hack.",
      "parentUuid": "Dqn5xCd0",
      "revId": "31832c9cdb44543a2f7c8038e7c2e61d0506ccd1",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "DqjjfKdU",
        "filename": "includes/MobileFrontend.hooks.php",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 94
      },
      "writtenOn": "2013-03-21T00:24:12Z",
      "side": 1,
      "message": "Is there not a danger here of the result being cached...?",
      "revId": "31832c9cdb44543a2f7c8038e7c2e61d0506ccd1",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "Dqh5GzcM",
        "filename": "includes/MobileFrontend.hooks.php",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 542
      },
      "writtenOn": "2013-03-21T15:15:44Z",
      "side": 1,
      "message": "You mean the wgHttpReferer? It seems that the config is set using inline JS, not a separate resource loader asset, so the answer would seem to be yes. How could we work around this?",
      "parentUuid": "DqjjfKdU",
      "revId": "31832c9cdb44543a2f7c8038e7c2e61d0506ccd1",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "Dqv5kOSU",
        "filename": "includes/MobileFrontend.hooks.php",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 91
      },
      "writtenOn": "2013-03-21T16:50:38Z",
      "side": 1,
      "message": "cant you find the referer in JS?",
      "parentUuid": "Dqh5GzcM",
      "revId": "31832c9cdb44543a2f7c8038e7c2e61d0506ccd1",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "DqoE5ID8",
        "filename": "includes/MobileFrontend.hooks.php",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 94
      },
      "writtenOn": "2013-03-21T18:32:54Z",
      "side": 1,
      "message": "Either try accessing it in javascript OR pass a query string parameter in the redirect that names the project to redirect back to.\n\nsomething like\n\nvar redirects \u003d {\nenwiki: \u0027wikipedia.org\u0027,\nfrwiki: \u0027fr.wikipedia.org\u0027\n}\nif ( redirects[ qs[project] ] ) {\ndocument.location \u003d redirects[ qs[project] ];\n}",
      "parentUuid": "Dqv5kOSU",
      "revId": "31832c9cdb44543a2f7c8038e7c2e61d0506ccd1",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "DqsE2OFA",
        "filename": "javascripts/specials/loginhandshake.js",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 94
      },
      "writtenOn": "2013-03-21T18:32:54Z",
      "side": 1,
      "message": "instead of using referrer you could pass a querystring project\u003denwiki and redirect to the project that refers to?",
      "revId": "31832c9cdb44543a2f7c8038e7c2e61d0506ccd1",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}