{
  "comments": [
    {
      "key": {
        "uuid": "aebe47e0_e05d937f",
        "filename": "includes/models/MobileCollection.php",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-11-25T19:08:11Z",
      "side": 1,
      "message": "Is it worth doing that? What you really want to do at the only usage (count( $mobilePages ) \u003d\u003d\u003d 0 in SpecialMobileEditWatchlist) is that you need to know, if there are pages in or not. You don\u0027t need the size of the pages array. So I would suggest to implement an \"isEmpty()\" method, instead of implementing Countable (however, implementing Countable could be useful later). The isEmpty method could then just return empty( $pages );. This would avoid the overhead of counting the elements of pages when you really don\u0027t need to.",
      "range": {
        "startLine": 23,
        "startChar": 9,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "bf591102c6508d9eb4fc17f25e4477f377d7cf94",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aebe47e0_e0cc733a",
        "filename": "includes/models/MobileCollection.php",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 94
      },
      "writtenOn": "2016-11-25T19:25:00Z",
      "side": 1,
      "message": "There is no  Countable like interface for Empty.",
      "parentUuid": "aebe47e0_e05d937f",
      "revId": "bf591102c6508d9eb4fc17f25e4477f377d7cf94",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aebe47e0_c59f3905",
        "filename": "includes/models/MobileCollection.php",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 3945
      },
      "writtenOn": "2016-11-28T15:24:38Z",
      "side": 1,
      "message": "We could create an interface for Emptyable as PHP doesn\u0027t support it out of the box, nor MediaWiki. IMHO it\u0027s not worth the hassle as one extra count call in Mediawik code is just a drop in the ocean (in MobileFrontend we have 25 count() calls and 5 empty() calls).  Countable is built-in interface, it would be supported in much more cases than our bespoke interface. As a fact, this task is an outcome of simple bug -\u003e someone used count() on collection object. \n\ncount() has some extra overhead (on HHVM it\u0027s almost same execution time as empty(), on PHP it is bit slower, but constant - count() for empty array takes same amount of time as count() on big array()).\n\n\nI support Florianschmidtwelzow comment, it would be nice to use isEmpty. MobileFrontend uses count() to check emptiness in many places. We should create a separate task to improve performance and fix those calls but first we have to introduce one shared MediaWiki isEmpty() interface and then implement it in MobileFrontend extension.\nI would leave this task as it is - it fixes the issue and it doesn\u0027t create any performance issues.\n\nGood read: http://ubiquity.acm.org/article.cfm?id\u003d1513451",
      "parentUuid": "aebe47e0_e05d937f",
      "range": {
        "startLine": 23,
        "startChar": 9,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "bf591102c6508d9eb4fc17f25e4477f377d7cf94",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}